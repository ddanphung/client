var config={buttonControlId:"ad-control",popupId:"ad-content",popupIframeId:"ad-content-iframe",popupIframeSrc:"https://sony.adsplay.net/register?popup=1&src=",popupIframeOrigin:"https://sony.adsplay.net",cookieKey:"sony-show",cookieLaterMsg:"sony-show-later",cookieLaterKey:"1",cookieLaterExpired:1,cookieSubmitMsg:"sony-show-submit",cookieSubmitKey:"2",cookieSubmitExpired:60},adControl=document.getElementById(config.buttonControlId),css={"#ad-control":{width:"45px",height:"45px",position:"fixed",right:"0",bottom:"40px","z-index":"9999",display:"block",cursor:"pointer","background-image":"url('http://cdn.adsplay.xyz/vod/2018/08/1c6e8e8baddf79243ac1c72e3341105b_5870.png')","background-size":"100%","background-color":"#fff","background-repeat":"no-repeat",transition:"width 1s"},"#ad-control:hover":{width:"120px",background:"url('http://cdn.adsplay.xyz/vod/2018/08/1c6e8e8baddf79243ac1c72e3341105b_6338.png')","background-size":"100%","background-color":"#fff","background-repeat":"no-repeat","background-position":"center"},"#ad-content":{display:"none",position:"fixed","z-index":"1","padding-top":"100px",left:"0",top:"0",width:"100%",height:"100%",overflow:"auto","text-align":"center","background-color":"rgb(0, 0, 0)","background-color":"rgba(0, 0, 0, 0.4)"},"#ad-content-iframe":{position:"relative","background-color":"#fefefe",margin:"auto",padding:"0",border:"1px solid #888",width:"802px",height:"602px","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)","-webkit-animation-name":"animatetop","-webkit-animation-duration":"0.4s","animation-name":"animatetop","animation-duration":"0.4"}},parseCssToString=function(e){for(var o="",t=Object.keys(e),n=0;n<t.length;n++){var i=t[n],a=e[i];o=o+i+" "+JSON.stringify(a)+" "}return o=(o=o.replace(/",/g,";")).replace(/"/g,"")},setupCss=function(){var e=parseCssToString(css),o=document.createElement("style");o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(o)},setupPopup=function(){var e=window.location.origin;-1<e.indexOf("fshare")?e="fshare":-1<e.indexOf("fptplay")&&(e="fptplay");var o=document.createElement("div");o.setAttribute("id",config.popupId),document.getElementsByTagName("body")[0].appendChild(o);var t=document.createElement("iframe");t.setAttribute("id",config.popupIframeId),t.src=config.popupIframeSrc+e,o.appendChild(t),adControl.style.display="none",o.style.display="block"},receiveMessage=function(e){if(e.origin===config.popupIframeOrigin){var o=e.data,t=document.getElementById(config.popupId);o===config.cookieLaterMsg?(t.parentNode.removeChild(t),adControl.style.display="block",setCookie(config.cookieKey,config.cookieLaterKey,config.cookieLaterExpired)):o===config.cookieSubmitMsg&&(t.parentNode.removeChild(t),setCookie(config.cookieKey,config.cookieSubmitKey,config.cookieSubmitExpired))}},setupControl=function(){adControl.addEventListener("click",function(){setupPopup()});var e=getCookie(config.cookieKey);e===config.cookieSubmitKey?adControl.style.display="none":e!==config.cookieLaterKey&&setTimeout(function(){setupPopup()},2e3)},setCookie=function(e,o,t){var n=new Date;n.setTime(n.getTime()+24*t*60*60*1e3);var i="expires="+n.toUTCString();document.cookie=e+"="+o+";"+i},getCookie=function(e){for(var o=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var i=t[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(o))return i.substring(o.length,i.length)}return""};window.addEventListener("message",receiveMessage,!1),setupCss(),setupControl();
